{"version":3,"sources":["App.js","serviceWorkerRegistration.js","reportWebVitals.js","index.js"],"names":["app","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","db","getFirestore","auth","getAuth","Timer","_ref","user","onBack","groupId","isRunning","setIsRunning","useState","time","setTime","points","setPoints","lastUpdateTime","setLastUpdateTime","members","setMembers","showMembers","setShowMembers","isCreator","setIsCreator","loadingMembers","setLoadingMembers","bannedMembers","setBannedMembers","onlineUsers","setOnlineUsers","useEffect","interval","setInterval","randomOnline","filter","Math","random","map","member","uid","clearInterval","fetchGroupData","async","groupDoc","getDoc","doc","exists","_groupData$userPoints","groupData","data","creator","userPoints","membersPromises","userDoc","_groupData$userPoints2","name","displayName","photoURL","membersList","Promise","all","Boolean","sort","a","b","error","console","alert","unsubscribe","onSnapshot","newPoints","_groupDoc$data$banned","includes","updateDoc","concat","updatePoints","prev","toggleBanMember","window","confirm","memberId","runTransaction","transaction","get","Error","currentBanned","isBanned","updates","id","banHistory","arrayUnion","bannedBy","timestamp","Date","action","addDoc","collection","userId","type","message","read","update","_jsxs","className","children","_jsx","onClick","src","alt","seconds","mins","floor","secs","toString","padStart","formatTime","disabled","_Fragment","index","title","updatedMembers","m","updatedUserPoints","_objectSpread","removeMember","length","App","setUser","groupName","setGroupName","groups","setGroups","loadingGroups","setLoadingGroups","selectedGroup","setSelectedGroup","showJoinModal","setShowJoinModal","joinCode","setJoinCode","darkMode","setDarkMode","savedMode","JSON","parse","localStorage","getItem","document","documentElement","setAttribute","prefersDark","matchMedia","matches","onAuthStateChanged","currentUser","setDoc","email","lastLogin","merge","fetchUserGroups","q","query","where","querySnapshot","getDocs","groupsPromises","docs","_groupData$bannedMemb","docSnap","creatorDoc","creatorName","code","slice","toUpperCase","some","g","handleBackToGroups","toggleDarkMode","newMode","setItem","stringify","signOut","provider","GoogleAuthProvider","result","signInWithPopup","value","onChange","e","target","placeholder","trim","newGroup","createdAt","group","handleJoinGroup","groupItem","getElementById","style","transform","opacity","transition","animation","resolve","setTimeout","deleteDoc","successMsg","createElement","textContent","body","appendChild","remove","deleteGroup","allGroupsQuery","allGroupsSnapshot","groupToJoin","forEach","groupCode","_groupToJoin$bannedMe","location","hostname","match","reportWebVitals","onPerfEntry","then","getCLS","getFID","getFCP","getLCP","getTTFB","catch","log","ReactDOM","render","React","StrictMode","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.9305674f.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { getAuth, signInWithPopup, GoogleAuthProvider, onAuthStateChanged, signOut } from 'firebase/auth';\nimport { initializeApp } from 'firebase/app';\nimport { getFirestore, collection, addDoc, getDocs, deleteDoc, doc, updateDoc, getDoc, query, where, setDoc, onSnapshot, runTransaction, arrayUnion } from 'firebase/firestore';\nimport './App.css';\n\n// Firebase configuration\nconst firebaseConfig = {\n  apiKey: \"AIzaSyDoLr3Dnb5YbCnUtTexaz84YOH5h8Ukfoc\",\n  authDomain: \"frist-b073a.firebaseapp.com\",\n  projectId: \"frist-b073a\",\n  storageBucket: \"frist-b073a.appspot.com\",\n  messagingSenderId: \"580630150830\",\n  appId: \"1:580630150830:web:815ba6942a64909329b73f\",\n  measurementId: \"G-GH3D6EMB6L\"\n};\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\nconst db = getFirestore(app);\nconst auth = getAuth(app);\n\nfunction Timer({ user, onBack, groupId }) {\n  const [isRunning, setIsRunning] = useState(false);\n  const [time, setTime] = useState(0);\n  const [points, setPoints] = useState(0);\n  const [lastUpdateTime, setLastUpdateTime] = useState(0);\n  const [members, setMembers] = useState([]);\n  const [showMembers, setShowMembers] = useState(false);\n  const [isCreator, setIsCreator] = useState(false);\n  const [loadingMembers, setLoadingMembers] = useState(true);\n  const [bannedMembers, setBannedMembers] = useState([]);\n  const [onlineUsers, setOnlineUsers] = useState([]);\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      const randomOnline = members\n        .filter(() => Math.random() > 0.5)\n        .map(member => member.uid);\n      setOnlineUsers(randomOnline);\n    }, 5000);\n\n    return () => clearInterval(interval);\n  }, [members]);\n\n  useEffect(() => {\n    const fetchGroupData = async () => {\n      try {\n        setLoadingMembers(true);\n        const groupDoc = await getDoc(doc(db, \"studyGroups\", groupId));\n        if (groupDoc.exists()) {\n          const groupData = groupDoc.data();\n          setIsCreator(groupData.creator === user.uid);\n          setBannedMembers(groupData.bannedMembers || []);\n          \n          const userPoints = groupData.userPoints?.[user.uid] || 0;\n          setPoints(userPoints);\n          \n          if (groupData.members) {\n            const membersPromises = groupData.members.map(async (uid) => {\n              const userDoc = await getDoc(doc(db, \"users\", uid));\n              if (userDoc.exists()) {\n                return {\n                  uid,\n                  name: userDoc.data().displayName,\n                  photoURL: userDoc.data().photoURL,\n                  points: groupData.userPoints?.[uid] || 0\n                };\n              }\n              return null;\n            });\n            \n            const membersList = (await Promise.all(membersPromises)).filter(Boolean);\n            membersList.sort((a, b) => b.points - a.points);\n            setMembers(membersList);\n          }\n        }\n      } catch (error) {\n        console.error(\"Error fetching group data:\", error);\n        alert(\"حدث خطأ أثناء تحميل بيانات المجموعة\");\n      } finally {\n        setLoadingMembers(false);\n      }\n    };\n    \n    fetchGroupData();\n    \n    const unsubscribe = onSnapshot(doc(db, \"studyGroups\", groupId), fetchGroupData);\n    return () => unsubscribe();\n  }, [groupId, user.uid]);\n\n  const formatTime = (seconds) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  const updatePoints = async (newPoints) => {\n    try {\n      const groupDoc = await getDoc(doc(db, \"studyGroups\", groupId));\n      if (groupDoc.exists() && !groupDoc.data().bannedMembers?.includes(user.uid)) {\n        await updateDoc(doc(db, \"studyGroups\", groupId), {\n          [`userPoints.${user.uid}`]: newPoints\n        });\n      }\n    } catch (error) {\n      console.error(\"Error updating points:\", error);\n    }\n  };\n\n  useEffect(() => {\n    if (isRunning && time > 0 && time % 30 === 0 && time !== lastUpdateTime) {\n      const newPoints = points + 1;\n      setPoints(newPoints);\n      updatePoints(newPoints);\n      setLastUpdateTime(time);\n    }\n  }, [time, isRunning]);\n\n  useEffect(() => {\n    let interval;\n    if (isRunning) {\n      interval = setInterval(() => {\n        setTime(prev => prev + 1);\n      }, 1000);\n    }\n    return () => clearInterval(interval);\n  }, [isRunning]);\n\n  const removeMember = async (memberId) => {\n    if (window.confirm(`هل أنت متأكد من حذف هذا العضو من المجموعة؟`)) {\n      try {\n        await runTransaction(db, async (transaction) => {\n          const groupDoc = await transaction.get(doc(db, \"studyGroups\", groupId));\n          if (!groupDoc.exists()) throw new Error(\"المجموعة غير موجودة\");\n          \n          const groupData = groupDoc.data();\n          const updatedMembers = groupData.members.filter(m => m !== memberId);\n          const updatedUserPoints = {...groupData.userPoints};\n          delete updatedUserPoints[memberId];\n          \n          transaction.update(doc(db, \"studyGroups\", groupId), {\n            members: updatedMembers,\n            userPoints: updatedUserPoints\n          });\n        });\n        alert(\"تم حذف العضو بنجاح\");\n      } catch (error) {\n        console.error(\"Error removing member:\", error);\n        alert(\"حدث خطأ أثناء حذف العضو\");\n      }\n    }\n  };\n\n  const toggleBanMember = async (memberId) => {\n    if (window.confirm(`هل أنت متأكد من ${bannedMembers.includes(memberId) ? 'إلغاء حظر' : 'حظر'} هذا العضو؟`)) {\n      try {\n        await runTransaction(db, async (transaction) => {\n          const groupDoc = await transaction.get(doc(db, \"studyGroups\", groupId));\n          if (!groupDoc.exists()) throw new Error(\"المجموعة غير موجودة\");\n          \n          const groupData = groupDoc.data();\n          const currentBanned = groupData.bannedMembers || [];\n          const isBanned = currentBanned.includes(memberId);\n          \n          const updatedBanned = isBanned \n            ? currentBanned.filter(id => id !== memberId)\n            : [...currentBanned, memberId];\n          \n          const updates = {\n            bannedMembers: updatedBanned,\n            banHistory: arrayUnion({\n              memberId: memberId,\n              bannedBy: user.uid,\n              timestamp: new Date(),\n              action: isBanned ? \"unban\" : \"ban\"\n            })\n          };\n          \n          if (!isBanned) {\n            updates[`userPoints.${memberId}`] = 0;\n            await addDoc(collection(db, \"notifications\"), {\n              userId: memberId,\n              groupId: groupId,\n              type: \"ban\",\n              message: `تم حظرك من المجموعة \"${groupData.name}\" ولن تحتسب نقاطك بعد الآن`,\n              timestamp: new Date(),\n              read: false\n            });\n          } else {\n            await addDoc(collection(db, \"notifications\"), {\n              userId: memberId,\n              groupId: groupId,\n              type: \"unban\",\n              message: `تم إلغاء حظرك من المجموعة \"${groupData.name}\" ويمكنك المذاكرة مرة أخرى`,\n              timestamp: new Date(),\n              read: false\n            });\n          }\n          \n          transaction.update(doc(db, \"studyGroups\", groupId), updates);\n        });\n        \n        alert(`تم ${bannedMembers.includes(memberId) ? 'إلغاء حظر' : 'حظر'} العضو بنجاح`);\n      } catch (error) {\n        console.error(\"Error updating banned members:\", error);\n        alert(\"حدث خطأ أثناء تحديث قائمة الحظر\");\n      }\n    }\n  };\n\n  return (\n    <div className=\"timer-container\">\n      <button onClick={onBack} className=\"back-button\">\n        ← العودة للمجموعات\n      </button>\n      \n      <div className=\"user-info\">\n        <div className=\"avatar-container\">\n          <img src={user.photoURL} alt=\"صورة المستخدم\" className=\"user-avatar\" />\n          {onlineUsers.includes(user.uid) && <div className=\"online-status\"></div>}\n        </div>\n        <span className=\"user-display-name\">{user.displayName}</span>\n        {bannedMembers.includes(user.uid) && (\n          <span className=\"banned-warning\">(حسابك محظور في هذه المجموعة)</span>\n        )}\n      </div>\n      \n      <div className=\"timer-display\">\n        <h2>وقت المذاكرة</h2>\n        <div className=\"time\">{formatTime(time)}</div>\n        <div className=\"points\">النقاط: {points}</div>\n        \n        <div className=\"timer-controls\">\n          <button \n            onClick={() => setIsRunning(!isRunning)}\n            className={isRunning ? 'pause-button' : 'start-button'}\n            disabled={bannedMembers.includes(user.uid)}\n          >\n            {isRunning ? 'إيقاف' : 'بدء'}\n          </button>\n          <button \n            onClick={() => {\n              setIsRunning(false);\n              setTime(0);\n            }}\n            className=\"reset-button\"\n          >\n            إعادة تعيين الوقت\n          </button>\n          <button\n            onClick={() => setShowMembers(!showMembers)}\n            className=\"members-button\"\n          >\n            {showMembers ? 'إخفاء الأعضاء' : 'عرض الأعضاء'}\n          </button>\n        </div>\n      </div>\n      \n      {showMembers && (\n        <div className=\"members-sidebar\">\n          <h3>أعضاء المجموعة</h3>\n          {loadingMembers ? (\n            <div className=\"loading-container\">\n              <div className=\"spinner\"></div>\n              <p>جاري تحميل الأعضاء...</p>\n            </div>\n          ) : (\n            <>\n              <div className=\"leaderboard\">\n                {members\n                  .filter(member => !bannedMembers.includes(member.uid))\n                  .map((member, index) => (\n                    <div key={member.uid} className={`member-item ${member.uid === user.uid ? 'current-user' : ''}`}>\n                      <span className=\"member-rank\">{index + 1}</span>\n                      <div className=\"avatar-container\">\n                        <img src={member.photoURL} alt={member.name} className=\"member-avatar\" />\n                        {onlineUsers.includes(member.uid) && <div className=\"online-status\"></div>}\n                      </div>\n                      <div className=\"member-info\">\n                        <span className=\"member-name\">{member.name}</span>\n                        <span className=\"member-points\">{member.points} نقطة</span>\n                      </div>\n                      {isCreator && member.uid !== user.uid && (\n                        <div className=\"member-actions\">\n                          <button \n                            onClick={() => toggleBanMember(member.uid)}\n                            className=\"ban-button\"\n                            title=\"حظر العضو\"\n                          >\n                            ⛔\n                          </button>\n                          <button \n                            onClick={() => removeMember(member.uid)}\n                            className=\"remove-member-button\"\n                            title=\"حذف العضو\"\n                          >\n                            ✕\n                          </button>\n                        </div>\n                      )}\n                    </div>\n                  ))\n                }\n              </div>\n              \n              {bannedMembers.length > 0 && (\n                <div className=\"banned-members-section\">\n                  <h4>الأعضاء المحظورين</h4>\n                  {members\n                    .filter(member => bannedMembers.includes(member.uid))\n                    .map((member) => (\n                      <div key={member.uid} className=\"member-item banned-member\">\n                        <div className=\"avatar-container\">\n                          <img src={member.photoURL} alt={member.name} className=\"member-avatar\" />\n                          {onlineUsers.includes(member.uid) && <div className=\"online-status\"></div>}\n                        </div>\n                        <div className=\"member-info\">\n                          <span className=\"member-name\">{member.name}</span>\n                          <span className=\"banned-label\">محظور</span>\n                        </div>\n                        {isCreator && (\n                          <button \n                            onClick={() => toggleBanMember(member.uid)}\n                            className=\"unban-button\"\n                            title=\"إلغاء حظر العضو\"\n                          >\n                            إلغاء الحظر\n                          </button>\n                        )}\n                      </div>\n                    ))\n                  }\n                </div>\n              )}\n            </>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n\nfunction App() {\n  const [user, setUser] = useState(null);\n  const [groupName, setGroupName] = useState('');\n  const [groups, setGroups] = useState([]);\n  const [loadingGroups, setLoadingGroups] = useState(false);\n  const [selectedGroup, setSelectedGroup] = useState(null);\n  const [showJoinModal, setShowJoinModal] = useState(false);\n  const [joinCode, setJoinCode] = useState('');\n  const [darkMode, setDarkMode] = useState(false);\n\n  const toggleDarkMode = () => {\n    const newMode = !darkMode;\n    setDarkMode(newMode);\n    document.documentElement.setAttribute('data-theme', newMode ? 'dark' : 'light');\n    localStorage.setItem('darkMode', JSON.stringify(newMode));\n  };\n\n  useEffect(() => {\n    const savedMode = JSON.parse(localStorage.getItem('darkMode'));\n    if (savedMode !== null) {\n      setDarkMode(savedMode);\n      document.documentElement.setAttribute('data-theme', savedMode ? 'dark' : 'light');\n    } else {\n      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;\n      setDarkMode(prefersDark);\n      document.documentElement.setAttribute('data-theme', prefersDark ? 'dark' : 'light');\n    }\n  }, []);\n\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, async (currentUser) => {\n      if (currentUser) {\n        await setDoc(doc(db, \"users\", currentUser.uid), {\n          displayName: currentUser.displayName,\n          photoURL: currentUser.photoURL,\n          email: currentUser.email,\n          lastLogin: new Date()\n        }, { merge: true });\n        \n        setUser(currentUser);\n        await fetchUserGroups(currentUser.uid);\n      } else {\n        setUser(null);\n        setGroups([]);\n        setSelectedGroup(null);\n      }\n    });\n    \n    return () => unsubscribe();\n  }, []);\n\n  const fetchUserGroups = async (userId) => {\n    setLoadingGroups(true);\n    try {\n      const q = query(\n        collection(db, \"studyGroups\"),\n        where(\"members\", \"array-contains\", userId)\n      );\n      \n      const querySnapshot = await getDocs(q);\n      const groupsArray = [];\n      \n      const groupsPromises = querySnapshot.docs.map(async (docSnap) => {\n        const groupData = docSnap.data();\n        \n        if (groupData.bannedMembers?.includes(userId)) {\n          return null;\n        }\n        \n        const creatorDoc = await getDoc(doc(db, \"users\", groupData.creator));\n        const creatorName = creatorDoc.exists() ? creatorDoc.data().displayName : \"مستخدم غير معروف\";\n        \n        return { \n          id: docSnap.id, \n          ...groupData,\n          creatorName,\n          code: docSnap.id.slice(0, 6).toUpperCase(),\n          isCreator: groupData.creator === userId\n        };\n      });\n      \n      const groups = (await Promise.all(groupsPromises)).filter(Boolean);\n      setGroups(groups);\n      \n      if (selectedGroup && !groups.some(g => g.id === selectedGroup)) {\n        setSelectedGroup(null);\n      }\n    } catch (error) {\n      console.error(\"Error fetching user groups:\", error);\n      alert(\"حدث خطأ أثناء جلب المجموعات\");\n    } finally {\n      setLoadingGroups(false);\n    }\n  };\n\n  const handleLogin = async () => {\n    const provider = new GoogleAuthProvider();\n    try {\n      const result = await signInWithPopup(auth, provider);\n      \n      await setDoc(doc(db, \"users\", result.user.uid), {\n        displayName: result.user.displayName,\n        photoURL: result.user.photoURL,\n        email: result.user.email,\n        lastLogin: new Date()\n      }, { merge: true });\n      \n      setUser(result.user);\n      await fetchUserGroups(result.user.uid);\n      \n    } catch (error) {\n      console.error(\"حدث خطأ أثناء تسجيل الدخول: \", error);\n      alert(\"حدث خطأ أثناء تسجيل الدخول، يرجى المحاولة مرة أخرى\");\n    }\n  };\n\n  const handleLogout = async () => {\n    try {\n      await signOut(auth);\n    } catch (error) {\n      console.error(\"Error signing out:\", error);\n    }\n  };\n\n  const addStudyGroup = async () => {\n    if (!groupName.trim()) {\n      alert(\"الرجاء إدخال اسم المجموعة.\");\n      return;\n    }\n    try {\n      const newGroup = {\n        name: groupName.trim(),\n        createdAt: new Date(),\n        creator: user.uid,\n        members: [user.uid],\n        userPoints: {\n          [user.uid]: 0\n        },\n        bannedMembers: []\n      };\n      \n      await addDoc(collection(db, \"studyGroups\"), newGroup);\n      setGroupName('');\n      await fetchUserGroups(user.uid);\n    } catch (error) {\n      console.error(\"حدث خطأ أثناء إضافة المجموعة: \", error);\n      alert(\"حدث خطأ أثناء إضافة المجموعة\");\n    }\n  };\n\n  const deleteGroup = async (groupId) => {\n    if (window.confirm(\"هل أنت متأكد من حذف هذه المجموعة؟ سيتم حذف جميع بياناتها نهائياً\")) {\n      try {\n        // إضافة تأثير قبل الحذف\n        const groupItem = document.getElementById(`group-${groupId}`);\n        if (groupItem) {\n          groupItem.style.transform = 'scale(0.9)';\n          groupItem.style.opacity = '0.5';\n          groupItem.style.transition = 'all 0.3s ease';\n          \n          // إضافة تأثير اهتزاز\n          groupItem.style.animation = 'shake 0.5s';\n          \n          await new Promise(resolve => setTimeout(resolve, 500));\n        }\n        \n        await deleteDoc(doc(db, \"studyGroups\", groupId));\n        await fetchUserGroups(user.uid);\n        \n        // عرض رسالة نجاح مع تأثير\n        const successMsg = document.createElement('div');\n        successMsg.className = 'deletion-success';\n        successMsg.textContent = 'تم حذف المجموعة بنجاح';\n        document.body.appendChild(successMsg);\n        \n        setTimeout(() => {\n          successMsg.style.opacity = '0';\n          setTimeout(() => successMsg.remove(), 500);\n        }, 2000);\n      } catch (error) {\n        console.error(\"حدث خطأ أثناء حذف المجموعة:\", error);\n        alert(\"حدث خطأ أثناء حذف المجموعة\");\n      }\n    }\n  };\n\n  const handleJoinGroup = (groupId) => {\n    setSelectedGroup(groupId);\n  };\n\n  const handleBackToGroups = () => {\n    setSelectedGroup(null);\n  };\n\n  const joinGroupByCode = async () => {\n    if (!joinCode.trim()) {\n      alert(\"الرجاء إدخال كود المجموعة\");\n      return;\n    }\n    \n    try {\n      const allGroupsQuery = collection(db, \"studyGroups\");\n      const allGroupsSnapshot = await getDocs(allGroupsQuery);\n      \n      let groupToJoin = null;\n      allGroupsSnapshot.forEach(doc => {\n        const groupCode = doc.id.slice(0, 6).toUpperCase();\n        if (groupCode === joinCode.toUpperCase().trim()) {\n          groupToJoin = { \n            id: doc.id, \n            ...doc.data(),\n            code: groupCode\n          };\n        }\n      });\n      \n      if (groupToJoin) {\n        if (groupToJoin.bannedMembers?.includes(user.uid)) {\n          alert(`أنت محظور من هذه المجموعة (${groupToJoin.name}).\\nلا يمكنك الانضمام أو كسب النقاط في هذه المجموعة.`);\n          return;\n        }\n        \n        if (groupToJoin.members && groupToJoin.members.includes(user.uid)) {\n          alert(\"أنت بالفعل عضو في هذه المجموعة\");\n          setSelectedGroup(groupToJoin.id);\n          setShowJoinModal(false);\n          setJoinCode('');\n          return;\n        }\n        \n        await updateDoc(doc(db, \"studyGroups\", groupToJoin.id), {\n          [`userPoints.${user.uid}`]: 0,\n          members: [...(groupToJoin.members || []), user.uid]\n        });\n        \n        setSelectedGroup(groupToJoin.id);\n        setShowJoinModal(false);\n        setJoinCode('');\n        await fetchUserGroups(user.uid);\n      } else {\n        alert(\"لا توجد مجموعة بهذا الكود، تأكد من صحة الكود\");\n      }\n    } catch (error) {\n      console.error(\"حدث خطأ أثناء الانضمام للمجموعة:\", error);\n      alert(\"حدث خطأ أثناء الانضمام للمجموعة\");\n    }\n  };\n\n  if (selectedGroup && user) {\n    return (\n      <div className=\"App\">\n        <header className=\"App-header\">\n          <Timer \n            user={user} \n            onBack={handleBackToGroups}\n            groupId={selectedGroup}\n          />\n        </header>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"App\">\n      <button \n        onClick={toggleDarkMode} \n        className=\"theme-toggle\"\n        aria-label={darkMode ? 'تفعيل الوضع الفاتح' : 'تفعيل الوضع الغامق'}\n      >\n        {darkMode ? '☀️' : '🌙'}\n      </button>\n      \n      <header className=\"App-header\">\n        <div className=\"login-container\">\n          {!user ? (\n            <button className=\"login-button\" onClick={handleLogin}>تسجيل الدخول باستخدام Google</button>\n          ) : (\n            <div className=\"welcome\">\n              <div className=\"avatar-container\">\n                <img src={user.photoURL} alt=\"صورة المستخدم\" className=\"user-avatar\" />\n              </div>\n              <div className=\"user-display-name\" onClick={() => alert(`مرحباً ${user.displayName}!`)}>\n                {user.displayName}\n              </div>\n              <button className=\"logout-button\" onClick={handleLogout}>تسجيل الخروج</button>\n            </div>\n          )}\n        </div>\n\n        {user && (\n          <div className=\"group-management\">\n            <div className=\"group-creation\">\n              <input\n                type=\"text\"\n                value={groupName}\n                onChange={(e) => setGroupName(e.target.value)}\n                placeholder=\"أدخل اسم مجموعة الدراسة\"\n              />\n              <button className=\"create-group-button\" onClick={addStudyGroup}>إنشاء مجموعة</button>\n            </div>\n            \n            <button \n              className=\"join-group-button\"\n              onClick={() => setShowJoinModal(true)}\n            >\n              الانضمام لمجموعة موجودة\n            </button>\n          </div>\n        )}\n\n        <div className=\"study-groups\">\n          <h2>مجموعاتي الدراسية</h2>\n          {loadingGroups ? (\n            <div className=\"loading-container\">\n              <div className=\"spinner\"></div>\n              <p>جاري تحميل المجموعات...</p>\n            </div>\n          ) : groups.length === 0 ? (\n            <p>لا توجد مجموعات متاحة حالياً</p>\n          ) : (\n            <ul>\n              {groups.map((group) => (\n                <li key={group.id} id={`group-${group.id}`} className=\"group-item\">\n                  <div className=\"group-info\">\n                    <span className=\"group-name\">{group.name}</span>\n                    <span className=\"group-code\">كود المجموعة: {group.code}</span>\n                    <span className=\"group-creator\">المنشئ: {group.creatorName}</span>\n                    {group.isCreator && <span className=\"creator-badge\">(أنت المنشئ)</span>}\n                  </div>\n                  <div className=\"group-actions\">\n                    {user && (\n                      <>\n                        <button \n                          onClick={() => handleJoinGroup(group.id)} \n                          className=\"join-button\"\n                        >\n                          دخول\n                        </button>\n                        {group.isCreator && (\n                          <button \n                            onClick={() => deleteGroup(group.id)} \n                            className=\"delete-button\"\n                            title=\"حذف المجموعة\"\n                          >\n                            حذف 🗑️\n                          </button>\n                        )}\n                      </>\n                    )}\n                  </div>\n                </li>\n              ))}\n            </ul>\n          )}\n        </div>\n        \n        {showJoinModal && (\n          <div className=\"modal-overlay\">\n            <div className=\"join-modal\">\n              <h3>الانضمام لمجموعة</h3>\n              <p>أدخل كود المجموعة للانضمام:</p>\n              <input\n                type=\"text\"\n                value={joinCode}\n                onChange={(e) => setJoinCode(e.target.value)}\n                placeholder=\"أدخل كود المجموعة\"\n              />\n              <div className=\"modal-buttons\">\n                <button onClick={joinGroupByCode} className=\"confirm-button\">\n                  تأكيد الانضمام\n                </button>\n                <button onClick={() => {\n                  setShowJoinModal(false);\n                  setJoinCode('');\n                }} className=\"cancel-button\">\n                  إلغاء\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n\n        <div className=\"footer\">\n          <p>This project was created by Mohamed Abu Tabikh</p>\n        </div>\n      </header>\n    </div>\n  );\n}\n\nexport default App;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://cra.link/PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://cra.link/PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && typeof onPerfEntry === 'function') {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    }).catch((error) => {\n      console.log('Error importing web-vitals:', error);\n    });\n  }\n};\n\nexport default reportWebVitals;","import React from 'react';\nimport ReactDOM from 'react-dom'; // تغيير من 'react-dom/client' إلى 'react-dom'\nimport './index.css';\nimport App from './App';\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\nimport reportWebVitals from './reportWebVitals';\n\n// تغيير طريقة التصيير لتتوافق مع React 17\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\nserviceWorkerRegistration.unregister();\nreportWebVitals();"],"sourceRoot":""}